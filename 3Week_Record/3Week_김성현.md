## Title: [3Week] 김성현

### 미션 요구사항 분석 & 체크리스트

---
## 📝미션 요약

### **필수과제**

- 관리자 회원, 관리자페이지, 정산데이터 생성, 건별정산처리, 전체정산처리

### **추가과제**

- 정산데이터를 배치로 생성
    - 스프링 내장 스케쥴러를 이용해서 배치가 매달 15일 새벽 4시에 실행되도록
    - `@EnableScheduling` 사용
    - Quartz 사용금지, 스프링의 기본적인 스케쥴링 기능을 이용해주세요.
- 출금신청기능(사용자기능)
- 출금처리기능(관리자기능)

## ✅체크리스트

Spring boot + gradle + data JPA + Spring Security + mysql + ajax + Thymeleaf 

---
## commit message
"feat:  게시판 CRUD  #1

- 더티체킹, ajax를 이용한 crud 구현
- 글 리스팅, 작성, 삭제, 수정까지 작성완료
- 리스팅을 제외한 기능에서 이슈 해결중"

### ISSUE message
### 목적
> Spring Security로 회원가입 구현

### 작업 상세사항
- [x] 관리자 페이지
- [ ] 회원자격 변경 기능 구현
- [x] 정산
- [ ] 출금

2주차
### 관리자 페이지 및 회원자격 변경 기능
- [x] 기획(페이지, 기능)
- [x] 관리자 페이지 구현
- [ ] authLevel에 따른 회원자격 변경 기능 구현[사용자-고객, 작가]/[관리자]

### 정산
- [x] 정산데이터 저장을 위한 DB생성
- [x] 사용자(작가) 건별, 전체 정산결과 조회 기능

### 출금
- [ ] 예치금 DB
- [ ] 출금 신청 기능(정산페이지에서)
- [ ] 출금 신청양식 폼 구현
- [ ] 관리자페이지에서 출금신청 목록 조회

---
## **[접근 방법]**

**과제 목표**
1. 코드와 git의 통일성 지키기.
2. 계획한 필수 기능 구현.
3. 기능 구현 후 이슈 단위로 개선할 점 피드백하기. + (참고, 설명, 리펙터링)    

도서를 등록하는 사람을 작가라고 했을 때, 자신의 등록도서 매출내역을 볼 수 있도록 하는 기능이 필요하다고 생각했다.
관리자는 모든 작가들의 출금을 관리하는 역할을 한다. 작가와 
---
### 이슈정리

1. 정산DB는 만들었지만 이를 관리, 조회하는 기능은 주어진 시간 내 구현이 힘들었다. 정산을 하기위해 Order 엔티티의 내용이 필요할 것이라 생각했고 이는 작가 개개인의 매출확인 기능을 구현하기로 방향을 틀었다. 요구사항에는 정산 조회 api가 post 요청으로 되어있었는데 단순히 DB정보를 가져와서 매출내역을 보여주는거라면 get요청이 나을 것이라 생각했다.
2. 정산DB생성 시 이전 수업의 ERD를 참고했다. 이번 final project에서 쓰지 않는 컬럼은 제외했다. 참고한 git에서 Order과 Product가 RebateOrderItem과 다대일 관계로 구성되어 있었다. 엔티티관계를 맺는게 익숙지 않은데 좋은 참고가 되었다.
3. 정산페이지는 url에 사용자(관리자)계정정보, username이 포함되게 했고, 정산DB에 담긴 내용을 보여주도록 했다. thymeleaf에서 username을 인식하도록 하기 위해서 principal을 통해 현재 로그인한 계정정보를 url에 담아 redirect하도록 했다.

미해결 이슈

1. 권한에 따라 작가는 네비바에 정산조회가 뜨고, 그 외 사용자는 뜨지 않도록 해야하는데 그 작업을 못했다.
2. 정산내역을 자신아 등록한 도서를 기준으로 보여줘야하는데 도서주문자를 기준으로 보여주고 있다.

---
### 느낀 점과 아쉬운 점.

